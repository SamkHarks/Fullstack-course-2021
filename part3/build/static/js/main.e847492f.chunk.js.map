{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","exportObj","getAll","axios","get","then","response","data","create","person","post","deletePerson","id","delete","update","newPerson","put","Notification","message","includes","className","Filter","name","handler","value","onChange","PersonForm","props","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Person","handleDelete","number","onClick","Persons","personsToShow","persons","setPersons","setMessage","map","find","window","confirm","personService","filter","p","catch","error","setTimeout","App","useState","setNewName","setNewNumber","filterName","setFilterName","useEffect","initialData","toLowerCase","event","target","preventDefault","some","personId","returnedPerson","console","log","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e847492f.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = 'api/persons' //'https://expresspersons.herokuapp.com/api/persons'//'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\nconst create = (person) => {\r\n    return axios.post(baseUrl,person).then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    return axios.put(`${baseUrl}/${id}`,newPerson).then(response => response.data)\r\n}\r\n\r\nconst exportObj = {\r\n    getAll,\r\n    create,\r\n    deletePerson,\r\n    update\r\n}\r\n\r\nexport default exportObj;","import React, { useEffect, useState } from 'react'\nimport personService from './services/persons.js'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  \n  if (message.includes(\"Information\") || message.includes(\"failed\")) {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nconst Filter = ({name, handler}) => {\n  return (\n    <div>\n      filter shown with <input value={name} onChange={handler} />\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n        <div>\n          name: <input value={props.newName} onChange={props.handleNameChange}/>\n        </div>\n        <div>\n          number: <input value={props.newNumber} onChange={props.handleNumberChange} />\n        </div> \n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nconst Person = ({person, handleDelete}) => {\n  return (\n    <tr>\n      <td>{person.name} {person.number} \n      <button onClick={handleDelete}>delete</button></td>\n    </tr>\n  )\n}\n\nconst Persons = ({personsToShow, persons, setPersons, setMessage}) => {\n  const handleDelete = (id) => {\n    const person = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService\n      .deletePerson(id)\n      .then(data=> setPersons(persons.filter(p=> p.id !== id)))\n      .catch(error => {\n        setMessage(`Information of ${person.name} has already been removed from server`)\n        setTimeout(()=>setMessage(null),5000)\n        setPersons(persons.filter(p => p.id !==id))\n      })\n    }\n  }\n\n  return (\n    <table>\n      <tbody>\n      {personsToShow.map(person => \n      <Person key={person.id} person={person} handleDelete={()=>handleDelete(person.id)}/>)}\n      </tbody>\n    </table>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilterName ] = useState('')\n  const [ message, setMessage ] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialData => {\n        setPersons(initialData)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const person = {\n      name: newName,\n      number: newNumber\n    }\n    if (persons.some(p=>p.name===person.name)) {\n      if(window.confirm(`${person.name} is already added to phonebook, replace the old number with new one?`)) {\n        const personId = persons.find(p => p.name === person.name).id\n        personService\n          .update(personId,person)\n          .then(returnedPerson => {\n            setMessage(`Number changed to ${returnedPerson.number}`)\n            setTimeout(()=>setMessage(null),5000)\n            setPersons(persons.map(person => person.id !== personId ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            console.log(error)\n            if (!error.response) {\n              setMessage(`Information of ${person.name} has already been removed from server`)\n              setPersons(persons.filter(p => p.id !==personId))\n            } else {\n              setMessage(`${error.response.data.error}`)\n            }\n            setTimeout(()=>setMessage(null),8000)\n          })\n      }\n    } else {\n      personService\n      .create(person)\n      .then(newPerson => {\n        setPersons(persons.concat(newPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(`Added ${newPerson.name}`)\n        setTimeout(()=>setMessage(null),5000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        setMessage(`${error.response.data.error}`)\n        setTimeout(()=>setMessage(null), 8000)\n      })\n    }\n\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilterName(event.target.value)\n  }\n\n  const personsToShow = filterName==='' ? \n  persons : persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()))\n\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={message} />\n\n      <Filter name={filterName} handler={handleFilterChange} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange}\n      newNumber={newNumber} handleNumberChange={handleNumberChange} />\n\n      <h3>Numbers</h3>\n\n      <Persons personsToShow={personsToShow} persons={persons} setPersons={setPersons} setMessage={setMessage} /> \n      \n      \n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}